/* ========== DNA RESULT REVEAL ========== */

/* Держим элементы скрытыми пока JS не добавит .dna-rv-visible.
   Специфичность (0,4,0) перебивает .dnr-screen.active .dnr-XXX (0,3,0). */
.dnr-screen.active .dna-rv-item:not(.dna-rv-visible){
  opacity:0;
  transition:none;
}

/* ─── Карточка: scale + blur → чисто ─── */
.dna-rv-card.dna-rv-visible{
  animation:dnaRevealCard .8s cubic-bezier(.16,1,.3,1) forwards;
}
@keyframes dnaRevealCard{
  0%{opacity:0;transform:scale(.7);filter:blur(8px)}
  50%{opacity:1;filter:blur(2px)}
  100%{opacity:1;transform:translateY(0) scale(1);filter:blur(0)}
}

/* ─── Тип результата: проявление ─── */
.dna-rv-type.dna-rv-visible{
  animation:dnaRevealType .6s cubic-bezier(.16,1,.3,1) forwards;
}
@keyframes dnaRevealType{
  0%{opacity:0;transform:scale(.85) translateY(10px);filter:blur(4px)}
  100%{opacity:1;transform:scale(1) translateY(0);filter:blur(0)}
}

/* ─── Текст: fade up ─── */
.dna-rv-text.dna-rv-visible{
  animation:dnaRevealText .6s cubic-bezier(.16,1,.3,1) forwards;
}
@keyframes dnaRevealText{
  0%{opacity:0;transform:translateY(16px)}
  100%{opacity:1;transform:translateY(0)}
}

/* ─── Кнопки: пружинистый scale ─── */
.dna-rv-btn.dna-rv-visible{
  animation:dnaRevealBtn .5s cubic-bezier(.34,1.56,.64,1) forwards;
}
@keyframes dnaRevealBtn{
  0%{opacity:0;transform:translateY(12px) scale(.9)}
  100%{opacity:1;transform:translateY(0) scale(1)}
}

/* ─── Glow-свечение внутри карточки ─── */
.dna-rv-glow{
  position:absolute;
  inset:0;
  border-radius:inherit;
  pointer-events:none;
  opacity:0;
  z-index:0;
  background:radial-gradient(ellipse at center,var(--dna-glow-color,rgba(139,92,246,.3)) 0%,transparent 70%);
}
.dna-rv-glow.dna-rv-visible{
  animation:dnaGlowPulse 1.5s ease-out forwards;
}
@keyframes dnaGlowPulse{
  0%{opacity:0;transform:scale(.6)}
  40%{opacity:.8;transform:scale(1.1)}
  100%{opacity:.3;transform:scale(1)}
}

/* Reduced motion — показываем всё сразу, без анимаций */
@media(prefers-reduced-motion:reduce){
  .dnr-screen.active .dna-rv-item:not(.dna-rv-visible){
    opacity:1;transform:none;filter:none;transition:none;
  }
  .dna-rv-glow{display:none;}
}

/* ========== DNA TEST ========== */
#scrDnaTest{display:flex;flex-direction:column;}
.dna-top{display:flex;align-items:center;padding:16px 20px 10px;flex-shrink:0;}
.dna-back{width:38px;height:38px;border-radius:12px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);display:flex;align-items:center;justify-content:center;cursor:pointer;-webkit-tap-highlight-color:transparent;transition:background .2s;}
.dna-back:active{background:rgba(255,255,255,.1);}
.dna-title{flex:1;text-align:center;font-size:14px;font-weight:600;color:rgba(255,255,255,.4);}
.dna-step{font-size:13px;font-weight:700;color:var(--primary-light);min-width:40px;text-align:right;}
.dna-prog{padding:0 20px 18px;flex-shrink:0;}
.dna-prog-track{height:4px;background:rgba(255,255,255,.04);border-radius:2px;overflow:hidden;}
.dna-prog-fill{height:100%;background:linear-gradient(90deg,var(--primary),var(--primary-light));border-radius:2px;transition:width .6s cubic-bezier(.16,1,.3,1);width:14.28%;}
.dna-body{flex:1;display:flex;flex-direction:column;padding:0 20px;overflow:hidden;}
.dna-q{flex:1;display:flex;flex-direction:column;transition:all .45s cubic-bezier(.16,1,.3,1);}
.dna-q.exit{opacity:0;transform:translateX(-40px) scale(.97);}
.dna-q.enter{opacity:0;transform:translateX(40px) scale(.97);}
.dna-q-icon{width:52px;height:52px;border-radius:16px;margin:0 auto 12px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,rgba(139,92,246,.1),rgba(6,182,212,.05));border:1px solid rgba(139,92,246,.1);}
.dna-q-icon svg{width:24px;height:24px;stroke:var(--primary-light);fill:none;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;}
.dna-q-num{font-size:10px;font-weight:700;color:var(--primary-light);text-align:center;margin-bottom:5px;letter-spacing:.14em;}
.dna-q-text{font-size:18px;font-weight:700;text-align:center;line-height:1.3;margin-bottom:18px;color:rgba(255,255,255,.88);padding:0 6px;}
.dna-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
.dna-card{padding:14px;border-radius:18px;background:rgba(255,255,255,.025);border:1.5px solid rgba(255,255,255,.06);cursor:pointer;transition:all .3s cubic-bezier(.16,1,.3,1);display:flex;flex-direction:column;gap:6px;position:relative;-webkit-tap-highlight-color:transparent;overflow:hidden;}
.dna-card::after{content:'';position:absolute;inset:0;border-radius:18px;background:linear-gradient(135deg,transparent 60%,rgba(255,255,255,.02));pointer-events:none;}
.dna-card:active{transform:scale(.97);}
.dna-card.selected{background:rgba(139,92,246,.07);border-color:rgba(139,92,246,.2);transform:scale(1.02);box-shadow:0 8px 32px rgba(139,92,246,.12);}
.dna-card.dimmed{opacity:.2;transform:scale(.94);pointer-events:none;}
.dna-card-ic{width:40px;height:40px;border-radius:12px;display:flex;align-items:center;justify-content:center;transition:transform .3s;}
.dna-card.selected .dna-card-ic{transform:scale(1.1);}
.dna-card-ic svg{width:20px;height:20px;fill:none;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;}
.dna-card-ic.bl{background:linear-gradient(135deg,rgba(59,130,246,.12),rgba(59,130,246,.04));}
.dna-card-ic.bl svg{stroke:#3b82f6;}
.dna-card-ic.gr{background:linear-gradient(135deg,rgba(34,197,94,.12),rgba(34,197,94,.04));}
.dna-card-ic.gr svg{stroke:#22c55e;}
.dna-card-ic.or{background:linear-gradient(135deg,rgba(245,158,11,.12),rgba(245,158,11,.04));}
.dna-card-ic.or svg{stroke:#f59e0b;}
.dna-card-ic.pu{background:linear-gradient(135deg,rgba(167,139,250,.12),rgba(167,139,250,.04));}
.dna-card-ic.pu svg{stroke:#a78bfa;}
.dna-card-t{font-size:13px;font-weight:700;color:rgba(255,255,255,.82);line-height:1.2;}
.dna-card-d{font-size:10px;color:rgba(255,255,255,.3);line-height:1.35;}
.dna-card-chk{position:absolute;top:10px;right:10px;width:22px;height:22px;border-radius:50%;background:var(--primary);display:flex;align-items:center;justify-content:center;opacity:0;transform:scale(0);transition:all .35s cubic-bezier(.34,1.56,.64,1);}
.dna-card.selected .dna-card-chk{opacity:1;transform:scale(1);}
.dna-footer{padding:12px 20px 22px;text-align:center;font-size:11px;color:rgba(255,255,255,.2);flex-shrink:0;}

/* ========== DNA REVEAL — WAVE ========== */
.dnr-reveal{position:absolute;inset:0;z-index:10;display:flex;align-items:center;justify-content:center;background:var(--bg);opacity:0;pointer-events:none;transition:opacity .4s;overflow:hidden;}
.dnr-reveal.active{opacity:1;pointer-events:all;}
.dnr-reveal-bg{position:absolute;inset:0;background:radial-gradient(circle at 50% 50%,rgba(139,92,246,.04),transparent 60%);transition:background 1.5s;}

/* Roulette */
.dnr-roulette{position:relative;width:160px;height:160px;animation:dnrRot 1.2s linear infinite;transition:all 1s cubic-bezier(.16,1,.3,1);}
.dnr-roulette.slowing{animation-duration:3s;}
.dnr-roulette.stopped{animation:none;}
.dnr-roulette.shrink{transform:scale(0);opacity:0;transition:all .6s cubic-bezier(.55,.085,.68,.53);}
.dnr-orb-spin{position:absolute;width:24px;height:24px;border-radius:50%;box-shadow:0 0 16px var(--orb-c);transition:all .8s cubic-bezier(.16,1,.3,1);}
.dnr-orb-spin.fade{opacity:0;transform:scale(0);filter:blur(8px);}
.dnr-orb-spin.winner{width:36px;height:36px;margin:-6px;box-shadow:0 0 40px var(--orb-c),0 0 80px var(--orb-c);animation:dnrPulseHeavy .8s ease-in-out 2;}
.dnr-orb-s{top:0;left:50%;margin-left:-12px;background:#3b82f6;--orb-c:rgba(59,130,246,.5);}
.dnr-orb-c{top:50%;right:0;margin-top:-12px;background:#22c55e;--orb-c:rgba(34,197,94,.5);}
.dnr-orb-k{bottom:0;left:50%;margin-left:-12px;background:#f59e0b;--orb-c:rgba(245,158,11,.5);}
.dnr-orb-a{top:50%;left:0;margin-top:-12px;background:#a78bfa;--orb-c:rgba(167,139,250,.5);}
@keyframes dnrRot{to{transform:rotate(360deg)}}
@keyframes dnrPulseHeavy{0%,100%{transform:scale(1)}50%{transform:scale(1.5);box-shadow:0 0 60px var(--orb-c),0 0 120px var(--orb-c)}}

/* Wave */
.dnr-wave{position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;pointer-events:none;opacity:0;transform:translate(-50%,-50%);}
.dnr-wave.fire{opacity:1;width:250vmax;height:250vmax;transition:all 1.2s cubic-bezier(.16,1,.3,1);}
.dnr-wave.done{opacity:0;transition:opacity .5s .2s;}

/* Label */
.dnr-reveal-label{position:absolute;bottom:26%;left:0;right:0;text-align:center;font-size:16px;font-weight:700;color:rgba(255,255,255,.4);transition:all .6s;letter-spacing:.04em;}
.dnr-reveal-label.big{font-size:20px;color:rgba(255,255,255,.7);letter-spacing:.08em;}
.dnr-reveal-label.hide{opacity:0;transform:translateY(-20px) scale(.9);}

/* ========== DNA RESULT — LUXURY ========== */
#scrDnaResult{overflow:hidden auto;}
.dnr-screen{position:absolute;inset:0;overflow-y:auto;pointer-events:none;}
.dnr-screen.active{pointer-events:all;}
.dnr-screen.active .dnr-btn{opacity:1 !important;transform:translateY(0) !important;pointer-events:all !important;}
.dnr-screen.active .dnr-retry{opacity:1 !important;pointer-events:all !important;}

.dnr-bg{position:fixed;inset:0;overflow:hidden;pointer-events:none;z-index:0;}
.dnr-orb{position:absolute;border-radius:50%;filter:blur(80px);opacity:0;transition:opacity 1.5s;}
.dnr-screen.active .dnr-orb{opacity:1;}
.dnr-orb1{width:280px;height:280px;top:-60px;left:-50px;animation:dnrF1 8s ease-in-out infinite;}
.dnr-orb2{width:180px;height:180px;bottom:15%;right:-30px;animation:dnrF2 10s ease-in-out 2s infinite;}
@keyframes dnrF1{0%,100%{transform:translate(0,0)}50%{transform:translate(12px,-8px)}}
@keyframes dnrF2{0%,100%{transform:translate(0,0)}50%{transform:translate(-8px,6px)}}
.dnr-bg-particles{position:absolute;inset:0;}
.dnr-bg-p{position:absolute;width:2px;height:2px;border-radius:50%;animation:dnrFloat linear infinite;}
@keyframes dnrFloat{0%{transform:translateY(0);opacity:0}10%{opacity:.4}90%{opacity:.4}100%{transform:translateY(-100vh);opacity:0}}
.dnr-scroll{position:relative;z-index:1;min-height:100%;overflow-y:auto;-webkit-overflow-scrolling:touch;display:flex;flex-direction:column;align-items:center;padding:28px 20px 160px;}

/* ── CARD CONTAINER ── */
.dnr-card{width:100%;max-width:340px;border-radius:24px;position:relative;background:rgba(255,255,255,.018);border:1px solid rgba(255,255,255,.05);backdrop-filter:blur(40px);-webkit-backdrop-filter:blur(40px);margin-bottom:24px;overflow:hidden;box-shadow:0 8px 48px rgba(0,0,0,.35),0 2px 8px rgba(0,0,0,.2),inset 0 1px 0 rgba(255,255,255,.04);opacity:0;transform:translateY(20px) scale(.98);transition:all .9s cubic-bezier(.16,1,.3,1);}
.dnr-screen.active .dnr-card{opacity:1;transform:translateY(0) scale(1);}
.dnr-card-noise{position:absolute;inset:0;border-radius:24px;opacity:.02;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");pointer-events:none;z-index:1;}
.dnr-card-shine{position:absolute;top:0;left:-120%;width:50%;height:100%;background:linear-gradient(105deg,transparent 40%,rgba(255,255,255,.018) 50%,transparent 60%);pointer-events:none;z-index:2;animation:dnrShine 10s ease-in-out 4s infinite;}
@keyframes dnrShine{0%,100%{left:-120%}12%{left:220%}}

/* ── HEADER — gradient zone ── */
.dnr-card-header{position:relative;padding:32px 22px 22px;overflow:hidden;}
.dnr-card-header-pattern{position:absolute;inset:0;background-image:repeating-linear-gradient(135deg,transparent,transparent 40px,rgba(255,255,255,.008) 40px,rgba(255,255,255,.008) 41px);pointer-events:none;}
.dnr-card-header-fade{position:absolute;bottom:0;left:0;right:0;height:40px;background:linear-gradient(to top,rgba(255,255,255,.018),transparent);pointer-events:none;}

/* Pawn */
.dnr-pawn-wrap{position:relative;width:96px;height:96px;margin:0 auto 14px;}
/* Pawn ripple — pulsating rings */
.dnr-pawn-ripple{position:absolute;inset:-20px;pointer-events:none;}
.dnr-ripple-ring{position:absolute;inset:0;border-radius:50%;border:1px solid var(--dnr-c,rgba(139,92,246,.2));opacity:0;animation:dnrRipple 3.6s ease-out infinite;}
.dnr-ripple-2{animation-delay:1.2s;}
.dnr-ripple-3{animation-delay:2.4s;}
@keyframes dnrRipple{
  0%{transform:scale(.6);opacity:0;border-width:1.5px;}
  15%{opacity:.35;}
  60%{opacity:.08;}
  100%{transform:scale(1.15);opacity:0;border-width:.5px;}
}
.dnr-pawn{width:96px;height:96px;border-radius:50%;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;animation:dnrPawnBreathe 4s ease-in-out infinite;}
@keyframes dnrPawnBreathe{0%,100%{transform:scale(1)}50%{transform:scale(1.02)}}
.dnr-pawn::after{content:'';position:absolute;inset:0;border-radius:50%;box-shadow:inset 0 -20px 30px rgba(0,0,0,.15);pointer-events:none;}
.dnr-pawn svg{width:44px;height:44px;filter:drop-shadow(0 3px 12px var(--dnr-c,rgba(139,92,246,.35)));}

/* Badge */
.dnr-badge{margin:0 auto;padding:5px 16px;border-radius:8px;font-size:9px;font-weight:800;letter-spacing:.14em;text-align:center;width:fit-content;border:1px solid;display:flex;align-items:center;gap:4px;}
.dnr-badge-icon{font-size:11px;}

/* ── BODY ── */
.dnr-card-body{padding:20px 22px 18px;position:relative;}
.dnr-exclusive{font-size:9px;font-weight:600;text-align:center;margin-bottom:4px;letter-spacing:.06em;opacity:.35;}
.dnr-label{font-size:10px;font-weight:800;letter-spacing:.18em;text-transform:uppercase;margin-bottom:4px;text-align:center;}

/* Name — gradient text + focus effect */
.dnr-name{font-size:32px;font-weight:800;text-align:center;letter-spacing:.03em;line-height:1.1;margin-bottom:8px;background:linear-gradient(180deg,rgba(255,255,255,.95) 30%,rgba(255,255,255,.55));-webkit-background-clip:text;-webkit-text-fill-color:transparent;transition:filter .6s cubic-bezier(.16,1,.3,1);}
.dnr-name.focusing{filter:blur(10px);}
.dnr-accent{width:48px;height:2px;border-radius:1px;margin:0 auto 0;opacity:0;transform:scaleX(0);transition:all .6s cubic-bezier(.16,1,.3,1) .3s;}
.dnr-screen.active .dnr-accent{opacity:1;transform:scaleX(1);}

.dnr-divider{height:1px;background:linear-gradient(90deg,transparent 5%,rgba(255,255,255,.05) 50%,transparent 95%);margin:16px 0;}

/* Description with decorative quote */
.dnr-desc-wrap{position:relative;padding:0 8px;}
.dnr-desc-quote{position:absolute;top:-6px;left:2px;font-size:36px;line-height:1;font-family:Georgia,serif;opacity:.08;pointer-events:none;}
.dnr-desc{font-size:13px;font-weight:400;color:rgba(255,255,255,.42);text-align:center;line-height:1.75;margin-bottom:16px;opacity:0;transform:translateY(8px);transition:all .7s cubic-bezier(.16,1,.3,1) .25s;}
.dnr-screen.active .dnr-desc{opacity:1;transform:translateY(0);}

/* Tags with gradient border */
.dnr-tags{display:flex;flex-wrap:wrap;gap:7px;justify-content:center;margin-bottom:4px;}
.dnr-tag{padding:6px 13px;border-radius:10px;font-size:11px;font-weight:600;position:relative;background:rgba(255,255,255,.015);border:1px solid rgba(255,255,255,.04);opacity:0;transform:translateY(6px) scale(.92);transition:all .45s cubic-bezier(.34,1.56,.64,1);}
.dnr-screen.active .dnr-tag{opacity:1;transform:translateY(0) scale(1);}
.dnr-screen.active .dnr-tag:nth-child(1){transition-delay:.35s}
.dnr-screen.active .dnr-tag:nth-child(2){transition-delay:.45s}
.dnr-screen.active .dnr-tag:nth-child(3){transition-delay:.55s}
.dnr-screen.active .dnr-tag:nth-child(4){transition-delay:.65s}

/* Career path with chess figures */
.dnr-career{background:rgba(255,255,255,.012);border:1px solid rgba(255,255,255,.03);border-radius:14px;padding:14px;margin-top:6px;opacity:0;transform:translateY(10px);transition:all .6s cubic-bezier(.16,1,.3,1) .75s;}
.dnr-screen.active .dnr-career{opacity:1;transform:translateY(0);}
.dnr-career-path{display:flex;align-items:center;justify-content:center;gap:0;margin-bottom:10px;}
.dnr-career-fig{font-size:14px;color:rgba(255,255,255,.1);flex-shrink:0;width:18px;text-align:center;transition:all .5s;}
.dnr-career-fig.active{color:rgba(255,255,255,.8);text-shadow:0 0 12px var(--dnr-c,rgba(139,92,246,.4));}
.dnr-career-fig.last{color:rgba(255,215,0,.15);}
.dnr-career-line{flex:1;height:1.5px;background:rgba(255,255,255,.04);max-width:20px;position:relative;overflow:hidden;}
.dnr-career-line-fill{position:absolute;inset:0;width:0%;transition:width 1.5s cubic-bezier(.16,1,.3,1) 1.2s;}
.dnr-xp-bar-bg{height:3px;background:rgba(255,255,255,.035);border-radius:2px;overflow:hidden;margin-bottom:6px;}
.dnr-xp-bar{height:100%;width:0%;border-radius:2px;position:relative;transition:width 2s cubic-bezier(.16,1,.3,1) 1s;}
.dnr-xp-bar::after{content:'';position:absolute;right:0;top:-1px;bottom:-1px;width:6px;border-radius:50%;filter:blur(3px);background:inherit;opacity:0;transition:opacity .5s 2.5s;}
.dnr-screen.active .dnr-xp-bar::after{opacity:.8;}
.dnr-xp-text{font-size:9px;color:rgba(255,255,255,.16);text-align:center;}
.dnr-xp-current{color:rgba(255,255,255,.3);}
.dnr-xp-target{color:rgba(255,255,255,.25);}

/* Footer */
.dnr-card-foot{padding:10px 22px 14px;border-top:1px solid rgba(255,255,255,.025);display:flex;align-items:center;justify-content:space-between;}
.dnr-card-logo{font-size:11px;font-weight:700;background:linear-gradient(135deg,var(--primary-light),var(--primary));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.dnr-card-serial{font-size:8px;font-weight:600;color:rgba(255,255,255,.1);letter-spacing:.08em;font-family:'Courier New',monospace;}
.dnr-card-share{width:30px;height:30px;border-radius:8px;border:1px solid rgba(255,255,255,.05);display:flex;align-items:center;justify-content:center;color:rgba(255,255,255,.2);cursor:pointer;transition:all .2s;-webkit-tap-highlight-color:transparent;}
.dnr-card-share:active{background:rgba(255,255,255,.04);color:rgba(255,255,255,.5);}
.dnr-card-share svg{width:13px;height:13px;}

/* ── BUTTONS ── */
.dnr-btn{
  width:calc(100% - 40px);
  max-width:340px;
  height:54px;
  border-radius:16px;
  border:none;
  background:linear-gradient(135deg,var(--primary),var(--primary-dark));
  color:#fff;
  font-family:inherit;
  font-size:15px;
  font-weight:700;
  cursor:pointer;
  box-shadow:0 4px 24px rgba(139,92,246,.18);
  position:relative;
  overflow:hidden;
  -webkit-tap-highlight-color:transparent;
  opacity:1 !important;
  margin-bottom:12px;
  display:block;
}
.dnr-btn:active{transform:scale(.97) !important;}
.dnr-btn::before{content:'';position:absolute;top:0;left:-120%;width:50%;height:100%;background:linear-gradient(105deg,transparent 35%,rgba(255,255,255,.04) 50%,transparent 65%);animation:dnrBtnSh 8s ease-in-out 4s infinite;}
@keyframes dnrBtnSh{0%,100%{left:-120%}12%{left:220%}}
.dnr-retry{margin-top:14px;font-size:12px;color:rgba(255,255,255,.12);cursor:pointer;padding:8px;-webkit-tap-highlight-color:transparent;text-align:center;}
